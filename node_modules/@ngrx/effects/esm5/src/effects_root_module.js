import * as tslib_1 from "tslib";
import { NgModule, Inject, Optional } from '@angular/core';
import { createAction, Store, StoreRootModule, StoreFeatureModule, } from '@ngrx/store';
import { EffectsRunner } from './effects_runner';
import { EffectSources } from './effect_sources';
import { ROOT_EFFECTS, _ROOT_EFFECTS_GUARD } from './tokens';
import * as ɵngcc0 from '@angular/core';
export var ROOT_EFFECTS_INIT = '@ngrx/effects/init';
export var rootEffectsInit = createAction(ROOT_EFFECTS_INIT);
var EffectsRootModule = /** @class */ (function () {
    function EffectsRootModule(sources, runner, store, rootEffects, storeRootModule, storeFeatureModule, guard) {
        this.sources = sources;
        runner.start();
        rootEffects.forEach(function (effectSourceInstance) {
            return sources.addEffects(effectSourceInstance);
        });
        store.dispatch({ type: ROOT_EFFECTS_INIT });
    }
    EffectsRootModule.prototype.addEffects = function (effectSourceInstance) {
        this.sources.addEffects(effectSourceInstance);
    };
    EffectsRootModule = tslib_1.__decorate([
        tslib_1.__param(3, Inject(ROOT_EFFECTS)),
        tslib_1.__param(4, Optional()),
        tslib_1.__param(5, Optional()),
        tslib_1.__param(6, Optional()),
        tslib_1.__param(6, Inject(_ROOT_EFFECTS_GUARD)),
        tslib_1.__metadata("design:paramtypes", [EffectSources,
            EffectsRunner,
            Store, Array, StoreRootModule,
            StoreFeatureModule, Object])
    ], EffectsRootModule);
EffectsRootModule.ngModuleDef = ɵngcc0.ɵɵdefineNgModule({ type: EffectsRootModule });
/*@__PURE__*/ ɵngcc0.ɵsetClassMetadata(EffectsRootModule, [{
        type: NgModule,
        args: [{}]
    }], function () { return [{ type: EffectSources }, { type: EffectsRunner }, { type: Store }, { type: Array, decorators: [{
                type: Inject,
                args: [ROOT_EFFECTS]
            }] }, { type: StoreRootModule, decorators: [{
                type: Optional
            }] }, { type: StoreFeatureModule, decorators: [{
                type: Optional
            }] }, { type: Object, decorators: [{
                type: Optional
            }, {
                type: Inject,
                args: [_ROOT_EFFECTS_GUARD]
            }] }]; }, { sources: [], addEffects: [] });
EffectsRootModule.ngInjectorDef = ɵngcc0.ɵɵdefineInjector({ factory: function EffectsRootModule_Factory(t) { return new (t || EffectsRootModule)(ɵngcc0.ɵɵinject(EffectSources), ɵngcc0.ɵɵinject(EffectsRunner), ɵngcc0.ɵɵinject(Store), ɵngcc0.ɵɵinject(ROOT_EFFECTS), ɵngcc0.ɵɵinject(StoreRootModule, 8), ɵngcc0.ɵɵinject(StoreFeatureModule, 8), ɵngcc0.ɵɵinject(_ROOT_EFFECTS_GUARD, 8)); } });
    return EffectsRootModule;
}());
export { EffectsRootModule };

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImM6L1VzZXJzL3R6aW9uL09uZURyaXZlL9ee16HXnteb15nXnS9Qcml2YXRlL0FydGljbGVTdGFjay1tYXN0ZXIvQXJ0aWNsZVN0YWNrLW1hc3Rlci9ub2RlX21vZHVsZXMvQG5ncngvZWZmZWN0cy9lc201L3NyYy9lZmZlY3RzX3Jvb3RfbW9kdWxlLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7O0FBTUE7Ozs7Ozs7Ozs7Ozs7OzRDQWM0QyxBQUN2Qjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztvWUFVSyIsImZpbGUiOiJlZmZlY3RzX3Jvb3RfbW9kdWxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgdHNsaWJfMSBmcm9tIFwidHNsaWJcIjtcbmltcG9ydCB7IE5nTW9kdWxlLCBJbmplY3QsIE9wdGlvbmFsIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBjcmVhdGVBY3Rpb24sIFN0b3JlLCBTdG9yZVJvb3RNb2R1bGUsIFN0b3JlRmVhdHVyZU1vZHVsZSwgfSBmcm9tICdAbmdyeC9zdG9yZSc7XG5pbXBvcnQgeyBFZmZlY3RzUnVubmVyIH0gZnJvbSAnLi9lZmZlY3RzX3J1bm5lcic7XG5pbXBvcnQgeyBFZmZlY3RTb3VyY2VzIH0gZnJvbSAnLi9lZmZlY3Rfc291cmNlcyc7XG5pbXBvcnQgeyBST09UX0VGRkVDVFMsIF9ST09UX0VGRkVDVFNfR1VBUkQgfSBmcm9tICcuL3Rva2Vucyc7XG5leHBvcnQgdmFyIFJPT1RfRUZGRUNUU19JTklUID0gJ0BuZ3J4L2VmZmVjdHMvaW5pdCc7XG5leHBvcnQgdmFyIHJvb3RFZmZlY3RzSW5pdCA9IGNyZWF0ZUFjdGlvbihST09UX0VGRkVDVFNfSU5JVCk7XG52YXIgRWZmZWN0c1Jvb3RNb2R1bGUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gRWZmZWN0c1Jvb3RNb2R1bGUoc291cmNlcywgcnVubmVyLCBzdG9yZSwgcm9vdEVmZmVjdHMsIHN0b3JlUm9vdE1vZHVsZSwgc3RvcmVGZWF0dXJlTW9kdWxlLCBndWFyZCkge1xuICAgICAgICB0aGlzLnNvdXJjZXMgPSBzb3VyY2VzO1xuICAgICAgICBydW5uZXIuc3RhcnQoKTtcbiAgICAgICAgcm9vdEVmZmVjdHMuZm9yRWFjaChmdW5jdGlvbiAoZWZmZWN0U291cmNlSW5zdGFuY2UpIHtcbiAgICAgICAgICAgIHJldHVybiBzb3VyY2VzLmFkZEVmZmVjdHMoZWZmZWN0U291cmNlSW5zdGFuY2UpO1xuICAgICAgICB9KTtcbiAgICAgICAgc3RvcmUuZGlzcGF0Y2goeyB0eXBlOiBST09UX0VGRkVDVFNfSU5JVCB9KTtcbiAgICB9XG4gICAgRWZmZWN0c1Jvb3RNb2R1bGUucHJvdG90eXBlLmFkZEVmZmVjdHMgPSBmdW5jdGlvbiAoZWZmZWN0U291cmNlSW5zdGFuY2UpIHtcbiAgICAgICAgdGhpcy5zb3VyY2VzLmFkZEVmZmVjdHMoZWZmZWN0U291cmNlSW5zdGFuY2UpO1xuICAgIH07XG4gICAgRWZmZWN0c1Jvb3RNb2R1bGUgPSB0c2xpYl8xLl9fZGVjb3JhdGUoW1xuICAgICAgICBOZ01vZHVsZSh7fSksXG4gICAgICAgIHRzbGliXzEuX19wYXJhbSgzLCBJbmplY3QoUk9PVF9FRkZFQ1RTKSksXG4gICAgICAgIHRzbGliXzEuX19wYXJhbSg0LCBPcHRpb25hbCgpKSxcbiAgICAgICAgdHNsaWJfMS5fX3BhcmFtKDUsIE9wdGlvbmFsKCkpLFxuICAgICAgICB0c2xpYl8xLl9fcGFyYW0oNiwgT3B0aW9uYWwoKSksXG4gICAgICAgIHRzbGliXzEuX19wYXJhbSg2LCBJbmplY3QoX1JPT1RfRUZGRUNUU19HVUFSRCkpLFxuICAgICAgICB0c2xpYl8xLl9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbRWZmZWN0U291cmNlcyxcbiAgICAgICAgICAgIEVmZmVjdHNSdW5uZXIsXG4gICAgICAgICAgICBTdG9yZSwgQXJyYXksIFN0b3JlUm9vdE1vZHVsZSxcbiAgICAgICAgICAgIFN0b3JlRmVhdHVyZU1vZHVsZSwgT2JqZWN0XSlcbiAgICBdLCBFZmZlY3RzUm9vdE1vZHVsZSk7XG4gICAgcmV0dXJuIEVmZmVjdHNSb290TW9kdWxlO1xufSgpKTtcbmV4cG9ydCB7IEVmZmVjdHNSb290TW9kdWxlIH07XG4iXX0=